<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gesti√≥n de Promociones - UTP</title>

  <link rel="stylesheet" href="CSS/gestion_promociones.css">
  <link rel="stylesheet" href="CSS/sidebar.css">
</head>

<body>

<div class="layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">
      <div class="brand">
          <h2>UTP</h2>
          <p>promociones</p>
      </div>

      <div class="user-info">
          <div class="user-avatar">üë§</div>
          <p class="user-name">Administrador</p>
      </div>

      <nav class="menu">
          <a href="dashboard_admin.html">üìä Dashboard</a>
          <a href="gestion_menus.html">üçΩ Gesti√≥n de Men√∫s</a>
          <a class="active" href="gestion_promociones.html">üéÅ Promociones</a>
          <a href="usuarios_admin.html">üë• Usuarios</a>
          <a href="ventas.html">üíµ Ventas</a>
      </nav>

      <a href="/logout" class="logout">Cerrar Sesi√≥n</a>
  </aside>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="content">

      <header class="header-main">
        <h1>üéÅ Gesti√≥n de Promociones</h1>
        <p class="subtitle">Administra las promociones y descuentos del sistema</p>
      </header>

      <div class="actions">
          <button id="btnAgregar" class="btn">
            ‚ûï Agregar Promoci√≥n
          </button>
      </div>

      <!-- GRID -->
      <section class="grid-2">

          <!-- TABLA -->
          <div class="card">
              <h3 class="card-title">Promociones Registradas</h3>
              <p class="muted">Gestiona todas las promociones activas e inactivas</p>

              <div class="table-wrapper">
                  <table class="tabla-promociones">
                      <thead>
                          <tr>
                              <th>Nombre</th>
                              <th>Descripci√≥n</th>
                              <th>Descuento</th>
                              <th>Precio (antes ‚Üí oferta)</th>
                              <th>Vigencia</th>
                              <th>Estado</th>
                              <th>Responsable</th>
                              <th>Items</th>
                              <th>Stock</th>
                              <th style="text-align:right">Acciones</th>
                          </tr>
                      </thead>
                      <tbody id="tablaBody"></tbody>
                  </table>
              </div>
          </div>

          <!-- COLUMNA DERECHA -->
          <aside class="right-sidebar">

              <div class="card">
                  <h3 class="card-title">Promociones Activas</h3>
                  <div id="cardsContainer" class="promo-cards"></div>
              </div>

              <div class="card">
                  <h3 class="card-title">Estad√≠sticas</h3>
                  <div class="stat-row"><span>Total Promociones</span><strong id="totalPromos">0</strong></div>
                  <div class="stat-row"><span>Activas</span><strong id="activePromos">0</strong></div>
                  <div class="stat-row"><span>Descuento Promedio</span><strong id="avgDiscount">0%</strong></div>
                  <div class="stat-row"><span>Precio Promedio Oferta</span><strong id="avgOferta">S/0</strong></div>
              </div>

          </aside>

      </section>

  </main>
</div>

<!-- MODAL -->
<div id="modalPromocion" class="modal">
  <div class="modal-content">
      <button class="cerrar" id="closeModal">&times;</button>
      <h2 id="modalTitulo">Nueva Promoci√≥n</h2>

      <form id="formPromocion">

        <input type="hidden" id="promoId">

        <label>Nombre *</label>
        <input id="nombre" required>

        <label>Descripci√≥n *</label>
        <textarea id="descripcion" rows="2" required></textarea>

        

        <!-- NUEVOS SELECTS DE COMBO -->
        <label>Plato de fondo</label>
        <select id="selectPlatoFondo"></select>

        <label>Entrada</label>
        <select id="selectEntrada"></select>

        <label>Postre</label>
        <select id="selectPostre"></select>

        <label>Bebida</label>
        <select id="selectBebida"></select>

        <div class="form-row">
          <div class="input-group">
            <label>Descuento (%)</label>
            <input id="descuento" type="number" min="0" max="100" value="0">
          </div>

          <div class="input-group">
            <label>Estado</label>
            <select id="estado">
              <option>Activa</option>
              <option>Programada</option>
              <option>Inactiva</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="input-group">
            <label>Fecha Inicio</label>
            <input id="fechaInicio" type="date" required>
          </div>

          <div class="input-group">
            <label>Fecha Fin</label>
            <input id="fechaFin" type="date" required>
          </div>
        </div>
      <label>Stock disponible para la promoci√≥n *</label>
<input id="stockMaximo" type="number" min="1" placeholder="Ej: 5" required>
<!-- NUEVO MENSAJE DE ERROR VISUAL -->
<p id="stockError" style="color:#c0392b; font-size:14px; display:none; margin-top:4px;">
</p>
     

        <!-- RESUMEN -->
        <div class="resumen-box">
          <div><strong>Precio real total:</strong> <span id="precioRealText">S/. 0.00</span></div>
          <div><strong>Precio final:</strong> <span id="precioFinalText">S/. 0.00</span></div>
          <div><strong>Stock combo:</strong> <span id="stockComboText">N/A</span></div>
        </div>

        <div class="modal-actions">
            <button type="button" id="btnCancel" class="btn secondary">Cancelar</button>
            <button type="submit" class="btn">Guardar</button>
        </div>

      </form>
  </div>
</div>

<script src="JS/gestion_promociones.js"></script>

</body>
</html>
